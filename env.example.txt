# =============================================================================
# AI Trading Analyst Platform - Environment Variables
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
PORT=3000

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# PostgreSQL (Production)
DATABASE_URL=postgresql://username:password@localhost:5432/ai_trading_platform

# SQLite (Development - alternative)
# DATABASE_URL=file:./dev.db

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-here-generate-with-openssl-rand-base64-32
JWT_SECRET=your-jwt-secret-here-generate-with-openssl-rand-base64-32

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# -----------------------------------------------------------------------------
# Socket.IO
# -----------------------------------------------------------------------------
SOCKET_IO_PORT=3001
SOCKET_IO_CORS_ORIGIN=http://localhost:3000

# -----------------------------------------------------------------------------
# Market Data Providers
# -----------------------------------------------------------------------------

# Binance
BINANCE_API_KEY=your-binance-api-key
BINANCE_API_SECRET=your-binance-api-secret
BINANCE_TESTNET=false

# Alpha Vantage
ALPHA_VANTAGE_API_KEY=your-alpha-vantage-api-key

# Twelve Data
TWELVE_DATA_API_KEY=your-twelve-data-api-key

# IEX Cloud
IEX_CLOUD_API_KEY=your-iex-cloud-api-key
IEX_CLOUD_SANDBOX=true

# Yahoo Finance (no key required, but rate limited)
YAHOO_FINANCE_ENABLED=true

# CCXT (uses Binance keys above)
CCXT_EXCHANGE=binance
CCXT_SANDBOX=false

# -----------------------------------------------------------------------------
# News Providers
# -----------------------------------------------------------------------------

# NewsAPI
NEWS_API_KEY=your-newsapi-key

# Benzinga
BENZINGA_API_KEY=your-benzinga-api-key

# Twitter/X API (optional)
TWITTER_API_KEY=your-twitter-api-key
TWITTER_API_SECRET=your-twitter-api-secret
TWITTER_BEARER_TOKEN=your-twitter-bearer-token

# RSS Feeds (comma-separated URLs)
RSS_FEEDS=https://feeds.bloomberg.com/markets/news.rss,https://www.cnbc.com/id/100003114/device/rss/rss.html

# -----------------------------------------------------------------------------
# Notification Services
# -----------------------------------------------------------------------------

# SendGrid (Email)
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME=AI Trading Analyst

# Mailgun (Email - alternative)
MAILGUN_API_KEY=your-mailgun-api-key
MAILGUN_DOMAIN=yourdomain.com
MAILGUN_FROM_EMAIL=noreply@yourdomain.com

# Twilio (SMS)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Telegram Bot
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_BOT_USERNAME=your_bot_username

# Admin Notifications
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PHONE=+1234567890
ADMIN_TELEGRAM_CHAT_ID=your-admin-telegram-chat-id

# -----------------------------------------------------------------------------
# LLM / AI Services (Multi-Provider Support)
# -----------------------------------------------------------------------------

# === FREE PROVIDERS (No API key required or free tier) ===

# Groq (FREE - Fast inference, no signup required)
GROQ_API_KEY=gsk_your_groq_key_here_optional

# HuggingFace Inference API (FREE tier available)
HUGGINGFACE_API_KEY=hf_your_huggingface_key_here_optional

# Together AI (FREE tier available)
TOGETHER_API_KEY=your_together_key_here_optional

# === PAID PROVIDERS (Require API keys and payment) ===

# Google Gemini (2.5 Flash and 2.0 Pro)
GOOGLE_GEMINI_API_KEY=your_gemini_api_key_here

# Anthropic Claude (3.5 Sonnet)
ANTHROPIC_API_KEY=sk-ant-your_claude_api_key_here

# OpenAI (GPT-4 Turbo)
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_MODEL=gpt-4-turbo-preview

# xAI Grok
XAI_API_KEY=xai-your_grok_api_key_here

# === LLM Configuration ===

# LLM Provider rotation strategy: priority, round-robin, least-used, fastest
LLM_ROTATION_STRATEGY=priority

# Enable/disable LLM features
LLM_ENABLED=true

# Fallback behavior
LLM_FALLBACK_ENABLED=true

# Request timeout (milliseconds)
LLM_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Python Microservices
# -----------------------------------------------------------------------------
PYTHON_PATTERN_DETECTOR_URL=http://localhost:8001
PYTHON_NEWS_AGENT_URL=http://localhost:8002
PYTHON_BACKTEST_ENGINE_URL=http://localhost:8003

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------

# Sentry
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# Grafana
GRAFANA_PORT=3002
GRAFANA_ADMIN_PASSWORD=admin

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Stripe (Payments)
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_PRICE_ID_FREE=price_free
STRIPE_PRICE_ID_PRO=price_pro
STRIPE_PRICE_ID_ENTERPRISE=price_enterprise

# -----------------------------------------------------------------------------
# Rate Limiting & Quotas
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Free tier limits
FREE_TIER_SIGNALS_PER_DAY=10
FREE_TIER_WATCHLISTS=3
FREE_TIER_SYMBOLS_PER_WATCHLIST=5

# Pro tier limits
PRO_TIER_SIGNALS_PER_DAY=100
PRO_TIER_WATCHLISTS=10
PRO_TIER_SYMBOLS_PER_WATCHLIST=20

# Enterprise tier limits (unlimited)
ENTERPRISE_TIER_SIGNALS_PER_DAY=999999
ENTERPRISE_TIER_WATCHLISTS=999999
ENTERPRISE_TIER_SYMBOLS_PER_WATCHLIST=999999

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_BACKTESTING_ENABLED=true
FEATURE_NEWS_ALERTS_ENABLED=true
FEATURE_TELEGRAM_ENABLED=true
FEATURE_SMS_ENABLED=false
FEATURE_HARMONIC_PATTERNS_ENABLED=true
FEATURE_ML_ENSEMBLE_ENABLED=true

# -----------------------------------------------------------------------------
# Backtest Configuration
# -----------------------------------------------------------------------------
BACKTEST_DEFAULT_LOOKBACK_DAYS=180
BACKTEST_MIN_TRADES_FOR_STATS=10
BACKTEST_COMMISSION_PERCENT=0.1
BACKTEST_SLIPPAGE_PERCENT=0.05

# -----------------------------------------------------------------------------
# Pattern Detection Configuration
# -----------------------------------------------------------------------------
PATTERN_MIN_CONFIDENCE=60
PATTERN_ENSEMBLE_MIN_STRATEGIES=2
PATTERN_REQUIRE_VOLUME_CONFIRMATION=true
PATTERN_REQUIRE_HTF_CONFIRMATION=true

# Harmonic pattern Fibonacci tolerances
HARMONIC_FIBONACCI_TOLERANCE=0.02

# Channel detection
CHANNEL_MIN_TOUCHES=3
CHANNEL_MAX_DEVIATION=0.02

# Breakout confirmation
BREAKOUT_VOLUME_MULTIPLIER=1.5
BREAKOUT_RETEST_MAX_BARS=10

# -----------------------------------------------------------------------------
# Multi-Timeframe Configuration
# -----------------------------------------------------------------------------
TIMEFRAMES=M1,M5,M15,H1,H4,D1
DEFAULT_TIMEFRAME=H1
HTF_CONFIRMATION_TIMEFRAMES=H4,D1

# -----------------------------------------------------------------------------
# News Configuration
# -----------------------------------------------------------------------------
NEWS_FETCH_INTERVAL_MINUTES=15
NEWS_MIN_IMPACT_SCORE=70
NEWS_SENTIMENT_THRESHOLD=0.5

# -----------------------------------------------------------------------------
# WebSocket Configuration
# -----------------------------------------------------------------------------
WS_MAX_CONNECTIONS_PER_USER=5
WS_HEARTBEAT_INTERVAL_MS=30000
WS_RECONNECT_DELAY_MS=5000

# -----------------------------------------------------------------------------
# Queue Configuration (BullMQ)
# -----------------------------------------------------------------------------
QUEUE_SCANNER_CONCURRENCY=5
QUEUE_NOTIFICATION_CONCURRENCY=10
QUEUE_BACKTEST_CONCURRENCY=2
QUEUE_NEWS_CONCURRENCY=3

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
CORS_ORIGIN=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
API_KEY_HEADER=X-API-Key
ENCRYPTION_KEY=your-encryption-key-32-chars-min

# -----------------------------------------------------------------------------
# Development
# -----------------------------------------------------------------------------
DEBUG=false
MOCK_DATA_ENABLED=false
SEED_DATABASE=false
